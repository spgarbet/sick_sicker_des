<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Your Name">
<meta name="dcterms.date" content="2025-05-27">

<title>Petri-Net Diagrams for Progressive Disease Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="01-introduction_files/libs/clipboard/clipboard.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/quarto.js"></script>
<script src="01-introduction_files/libs/quarto-html/popper.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/anchor.min.js"></script>
<link href="01-introduction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01-introduction_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01-introduction_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01-introduction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01-introduction_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="01-introduction_files/libs/quarto-contrib/intersection-observer-polyfill-1.0.0/intersection-observer.js"></script>
<script src="01-introduction_files/libs/quarto-contrib/scrollama-3.2.0/scrollama.min.js"></script>
<script src="01-introduction_files/libs/quarto-contrib/closeread-0.1.0/closeread.js"></script>
<meta cr-debug-mode="false">
<meta cr-remove-header-space="false">


<link rel="stylesheet" href="_extensions/qmd-lab/closeread/closeread.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="01-introduction.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Petri-Net Diagrams for Progressive Disease Models</h1>
<p class="subtitle lead">Discrete Event Simulation for Health Decision Modeling</p>
</div>


<div class="quarto-title-meta-author column-body">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">John Graves <a href="mailto:john.graves@vanderbilt.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Vanderbilt University School of Medicine
          </p>
        <p class="affiliation">
            Vanderbilt Owen Gradute School of Management
          </p>
        <p class="affiliation">
            Vanderbilt University Medical Center
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Shawn Garbett <a href="mailto:shawn.garbett@vumc.org" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Vanderbilt University School of Medicine
          </p>
        <p class="affiliation">
            Vanderbilt University Medical Center
          </p>
      </div>
  </div>

<div class="quarto-title-meta column-body">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 27, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1 page-columns page-full">
<h1>Introduction</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This text was AI-generated just to put in some filler for now; we’ll want to go back and edit using our own language.</p>
</div>
</div>
<p><span style="color:cornflowerblue"><strong>Discrete event simulation (DES) </strong></span> is a modeling framework that offers unique advantages for evaluating complex healthcare interventions and systems. DES explicitly models patient experience in a health care system based on a series of discrete events occurring over time, such as disease onset, treatment initiation, and other clinical outcomes. DES can also capture dynamic interactions between patients and system resources, making it particularly valuable for evaluating interventions that affect system capacity, waiting times, or resource utilization patterns.</p>
<section id="comparison-with-microsimulation" class="level2">
<h2 class="anchored" data-anchor-id="comparison-with-microsimulation">Comparison with Microsimulation</h2>
<p>While both DES and microsimulation model individual patients rather than population cohorts, they differ fundamentally in their temporal structure and scope <span class="citation" data-cites="graves2021comparison">(<a href="#ref-graves2021comparison" role="doc-biblioref">Graves et al. 2021</a>)</span>. Microsimulation follows individuals through predetermined time cycles, updating their characteristics and health states at regular intervals, with a primary focus on long-term disease progression and outcomes.</p>
<p>DES, in contrast, models the actual sequence and timing of events as they occur, allowing practitioners to explicitly capture healthcare processes, resource constraints, and patient trajectories as they interact in a system (e.g., wait times for a bed or procedure). This makes DES especially suited for modeling the experience of disease—or its absence—while also accounting operational aspects of care delivery that may affect disease severity, progression, and costs.</p>
</section>
<section id="conceptual-framework" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="conceptual-framework">Conceptual Framework</h2>
<p>To illustrate these concepts more intuitively, consider a racing metaphor where each patient represents a race car navigating a complex circuit with multiple checkpoints, pit stops, and potential hazards.</p>
<div class="column-screen" style="background-image:url(images/starting-line-cars2.png); background-size: 100vw; height: 600px; background-position: center bottom; background-repeat: no-repeat; opacity: 0.5">

</div>
<figcaption>
Image generated by ChatGPT 4o
</figcaption>
<p>In this framework, each car follows its own unique journey (“trajectory”) through a race course, with discrete events corresponding to key moments like crossing timing markers, making scheduled pit stops for fuel and tire changes, or experiencing unexpected mechanical issues that require roadside assistance.</p>
<p>The race organizers (i.e., the modeler) track not only each car’s total race time but also the precise timing and sequence of every significant event—when cars enter the pit lane, how long they wait for available mechanics, whether they experience delays due to track congestion, and how these operational realities affect both their race performance and resource consumption.</p>
<div class="column-screen" style="background-image:url(images/scoreboard-race.png); background-size: 100vw; height: 600px; background-position: center -55%; background-repeat: no-repeat; opacity: 0.5">

</div>
<figcaption>
Image generated by ChatGPT 4o
</figcaption>
<p>This racing analogy highlights the fundamental difference between DES and microsimulation approaches. While microsimulation might update each car’s position and characteristics at regular time intervals - checking their status every five minutes regardless of what’s happening on the track - DES models the actual sequence of racing events as they unfold in real-time. It captures the moment a car crosses the start line, navigates a challenging turn, requires emergency pit service, or encounters a yellow flag that affects the entire field. Just as race organizers need to understand how pit crew availability affects race outcomes, healthcare analysts use DES to model how resource constraints and operational dynamics influence patient experiences and clinical outcomes.</p>
<div class="column-screen" style="background-image:url(images/finish-line-cars.png); background-size: 100vw; height: 400px; background-position: center +15%; background-repeat: no-repeat; opacity: 0.5">

</div>
<figcaption>
Image generated by ChatGPT 4o
</figcaption>
<p>The competitive dynamics inherent in racing perfectly mirror the resource competition found in healthcare systems. When multiple cars need pit service simultaneously, queues form and strategic decisions must be made about service priority - much like patients competing for limited hospital beds, surgical slots, or specialist appointments. DES excels at modeling these interactions, capturing how a crash requiring track cleanup affects all subsequent cars, how limited pit crews create bottlenecks during busy periods, and how the timing of these events influences both individual race outcomes and overall resource utilization. However, this detailed operational focus comes with increased complexity in model development and validation, requiring precise information about pit stop procedures, crew availability, and track conditions that might not be readily available. While DES proves invaluable when interventions directly affect the racing infrastructure and competitive dynamics, microsimulation remains more practical for analyzing long-term driver career outcomes where the operational details of individual races are less critical to the overall assessment.</p>
</section>
</section>
<section id="setup" class="level1">
<h1>Setup</h1>
<p>Our first task is to prepare our R session for the simulation.</p>
<p>We begin by loading necessary libraries.</p>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-libraries" data-highlight="1">
<div class="narrative">
<p>Simmer is the most important</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-libraries" class="sticky">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(simmer)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="model-inputs" class="level1">
<h1>Model Inputs</h1>
<p>We next define model inputs.</p>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-inputs">
<div class="narrative">
<p>Model inputs are shown </p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-inputs" class="sticky">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>inputs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>    <span class="at">N      =</span> <span class="dv">5</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>  </span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="co"># Parameters</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="at">horizon=</span>    <span class="dv">30</span>,      <span class="co"># Time horizon</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>    </span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="co"># Cycle =&gt; 1 year</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="at">d.r    =</span>     <span class="fl">0.03</span>,   <span class="co"># Discount Rate</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>    </span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="at">r.HS1  =</span>     <span class="fl">0.15</span>,   <span class="co"># Disease Onset Rate / year       (H  -&gt; S1)</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="at">r.S1H  =</span>     <span class="fl">0.7</span>,    <span class="co"># Recovery Rate / year            (S1 -&gt; H)</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="at">r.S1S2 =</span>     <span class="fl">0.10</span>,   <span class="co"># Disease Progression rate / year (S1 -&gt; S2)</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="at">r.HD   =</span>     <span class="fl">0.005</span>,  <span class="co"># Healthy to Dead rate / year     (H  -&gt; D)</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="at">hr.S1D =</span>     <span class="dv">3</span>,      <span class="co"># Hazard ratio in S1 vs healthy </span></span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="at">hr.S2D =</span>    <span class="dv">10</span>,      <span class="co"># Hazard ratio in S2 vs healthy</span></span>
<span id="cb2-16"><a href="#cb2-16"></a> </span>
<span id="cb2-17"><a href="#cb2-17"></a>    <span class="co"># Annual Costs</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>    <span class="at">c.H    =</span>  <span class="dv">2000</span>,      <span class="co"># Healthy individuals </span></span>
<span id="cb2-19"><a href="#cb2-19"></a>    <span class="at">c.S1   =</span>  <span class="dv">4000</span>,      <span class="co"># Sick individuals in S1</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>    <span class="at">c.S2   =</span> <span class="dv">15000</span>,      <span class="co"># Sick individuals in S2</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>    <span class="at">c.D    =</span>     <span class="dv">0</span>,      <span class="co"># Dead individuals</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>    <span class="at">c.Trt  =</span> <span class="dv">12000</span>,      <span class="co"># Additional Annual cost for S1 and S2</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>    </span>
<span id="cb2-24"><a href="#cb2-24"></a>    <span class="co"># Utility Weights</span></span>
<span id="cb2-25"><a href="#cb2-25"></a>    <span class="at">u.H    =</span>     <span class="fl">1.00</span>,   <span class="co"># Healthy</span></span>
<span id="cb2-26"><a href="#cb2-26"></a>    <span class="at">u.S1   =</span>     <span class="fl">0.80</span>,   <span class="co"># S1</span></span>
<span id="cb2-27"><a href="#cb2-27"></a>    <span class="at">u.S2   =</span>     <span class="fl">0.60</span>,   <span class="co"># S2</span></span>
<span id="cb2-28"><a href="#cb2-28"></a>    <span class="at">u.D    =</span>     <span class="fl">0.00</span>,   <span class="co"># Dead</span></span>
<span id="cb2-29"><a href="#cb2-29"></a>    </span>
<span id="cb2-30"><a href="#cb2-30"></a>    <span class="co"># Intervention Effect</span></span>
<span id="cb2-31"><a href="#cb2-31"></a>    <span class="at">u.Trt  =</span>     <span class="fl">0.95</span>,   <span class="co"># S1 Utility for treatment in S1</span></span>
<span id="cb2-32"><a href="#cb2-32"></a>    </span>
<span id="cb2-33"><a href="#cb2-33"></a>    <span class="at">wtp    =</span>     <span class="fl">1e5</span>,    <span class="co"># 100k willingness to pay</span></span>
<span id="cb2-34"><a href="#cb2-34"></a>    </span>
<span id="cb2-35"><a href="#cb2-35"></a>    <span class="at">strategy =</span> <span class="st">'notreat'</span> <span class="co"># Default strategy is no treatment</span></span>
<span id="cb2-36"><a href="#cb2-36"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-boilerplate" data-highlight="1">
<div class="narrative">
<p>All inputs are summarized in a standalone script <code>inputs.R</code>.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-boilerplate" data-highlight="2">
<div class="narrative">
<p><code>main_loop.R</code> contains some helper functions.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-boilerplate" data-highlight="3">
<div class="narrative">
<p>A small diversion is we need to be able to apply <a href="https://en.wikipedia.org/wiki/Discounting">discounting</a> to our results. Thus a numerically stable and vectorized version of discounting is just the ticket.The file <a href="./discount.R"><code>discount.R</code></a> contains what’s required. Other common versions utilize the power definition of discounting, this uses the “^” operator which limits the numerical stable range of the function. Our function uses the exponential formulation with a greater numerical stability. The function also does point discounting or integrated area discounted.</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-boilerplate" class="sticky">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">'inputs.R'</span>))     <span class="co"># Model Parameters</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">'main_loop.R'</span>))  <span class="co"># Helper functions</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">'discount.R'</span>))   <span class="co"># Discounting functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="petri-net-diagrams" class="level1">
<h1>Petri Net Diagrams</h1>
<p>A <span style="color:#007bdd"><strong>Petri Net diagram</strong></span> is a graphical modeling tool that represents the flow of resources, entities, and control through a DES over time. It’s particularly useful for modeling concurrent processes and shared resources.</p>
<p><img src="images/petri-model5.png" class="img-fluid quarto-figure quarto-figure-center"> Petri nets offer a <strong>graphical grammar</strong> that aligns neatly with discrete-event simulation (DES):</p>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 20%">
<col style="width: 57%">
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Symbol</th>
<th>In our disease model…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Place</em></td>
<td>● (circle)</td>
<td>Clinical states (<code>H</code>, <code>S1</code>, <code>S2</code>), queues, resources</td>
</tr>
<tr class="even">
<td><em>Token</em></td>
<td>⬤</td>
<td>A single patient or a unit of resource capacity</td>
</tr>
<tr class="odd">
<td><em>Transition</em></td>
<td>▭ (bar/rectangle)</td>
<td>Events: incidence, progression, death, censoring, resource release</td>
</tr>
<tr class="even">
<td><em>Arc</em></td>
<td>→</td>
<td>Preconditions &amp; results of an event</td>
</tr>
<tr class="odd">
<td><em>Marking</em></td>
<td>Distribution of tokens</td>
<td>Current cohort composition and resource utilisation</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>A transition <strong>fires</strong> only when every input place supplies at least one token —<br>
perfect for competing-risk logic in progressive disease.</p>
</div>
</div>
<section id="why-petri-nets-for-health-economic-des" class="level2">
<h2 class="anchored" data-anchor-id="why-petri-nets-for-health-economic-des">1 Why Petri Nets for Health-Economic DES?</h2>
<p>Petri nets offer a <strong>graphical grammar</strong> that aligns neatly with discrete-event simulation (DES):</p>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 20%">
<col style="width: 57%">
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Symbol</th>
<th>In our disease model…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Place</em></td>
<td>● (circle)</td>
<td>Clinical states (<code>H</code>, <code>S1</code>, <code>S2</code>), queues, resources</td>
</tr>
<tr class="even">
<td><em>Token</em></td>
<td>⬤</td>
<td>A single patient or a unit of resource capacity</td>
</tr>
<tr class="odd">
<td><em>Transition</em></td>
<td>▭ (bar/rectangle)</td>
<td>Events: incidence, progression, death, censoring, resource release</td>
</tr>
<tr class="even">
<td><em>Arc</em></td>
<td>→</td>
<td>Preconditions &amp; results of an event</td>
</tr>
<tr class="odd">
<td><em>Marking</em></td>
<td>Distribution of tokens</td>
<td>Current cohort composition and resource utilisation</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>A transition <strong>fires</strong> only when every input place supplies at least one token —<br>
perfect for competing-risk logic in progressive disease.</p>
</div>
</div>
<hr>
</section>
<section id="core-progressive-disease-net" class="level2">
<h2 class="anchored" data-anchor-id="core-progressive-disease-net">2 Core Progressive-Disease Net</h2>
<p>Below is DOT code you can render via the <strong>dot</strong> engine (Graphviz).<br>
Tokens start in <code>H</code> at <em>t = 0</em>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 714.42 283.30" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 279.3)">
<title>DiseaseNet</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-279.3 710.42,-279.3 710.42,4 -4,4"></polygon>
<text text-anchor="middle" x="353.21" y="-258.7" font-family="Times,serif" font-size="14.00">Progressive disease • follow until T or death</text>
<!-- H -->
<g id="node1" class="node">
<title>H</title>
<ellipse fill="none" stroke="black" cx="39.5" cy="-49" rx="39.5" ry="39.5"></ellipse>
<text text-anchor="middle" x="39.5" y="-52" font-family="Times,serif" font-size="10.00">H</text>
<text text-anchor="middle" x="39.5" y="-40" font-family="Times,serif" font-size="10.00">(Healthy)</text>
</g>
<!-- tInc -->
<g id="node7" class="node">
<title>tInc</title>
<polygon fill="none" stroke="black" points="165.96,-175 115.01,-175 115.01,-153 165.96,-153 165.96,-175"></polygon>
<text text-anchor="middle" x="140.49" y="-161.3" font-family="Times,serif" font-size="9.00">Incidence</text>
</g>
<!-- H&#45;&gt;tInc -->
<g id="edge1" class="edge">
<title>H-&gt;tInc</title>
<path fill="none" stroke="black" d="M65.99,-78.62C83.91,-99.43 107.37,-126.69 122.91,-144.74"></path>
<polygon fill="black" stroke="black" points="120.67,-147.5 129.84,-152.79 125.97,-142.93 120.67,-147.5"></polygon>
</g>
<!-- tD0 -->
<g id="node12" class="node">
<title>tD0</title>
<polygon fill="none" stroke="black" points="159.48,-96 121.5,-96 121.5,-74 159.48,-74 159.48,-96"></polygon>
<text text-anchor="middle" x="140.49" y="-82.3" font-family="Times,serif" font-size="9.00">Death</text>
</g>
<!-- H&#45;&gt;tD0 -->
<g id="edge3" class="edge">
<title>H-&gt;tD0</title>
<path fill="none" stroke="black" d="M76.8,-62.2C88.46,-66.44 101.17,-71.06 112.08,-75.03"></path>
<polygon fill="black" stroke="black" points="110.92,-78.34 121.52,-78.46 113.31,-71.76 110.92,-78.34"></polygon>
</g>
<!-- tC0 -->
<g id="node13" class="node">
<title>tC0</title>
<polygon fill="none" stroke="black" points="479.98,-22 437.98,-22 437.98,0 479.98,0 479.98,-22"></polygon>
<text text-anchor="middle" x="458.98" y="-8.3" font-family="Times,serif" font-size="9.00">Censor</text>
</g>
<!-- H&#45;&gt;tC0 -->
<g id="edge5" class="edge">
<title>H-&gt;tC0</title>
<path fill="none" stroke="black" d="M79.03,-45.49C161.56,-37.98 353.96,-20.47 428.1,-13.72"></path>
<polygon fill="black" stroke="black" points="428.51,-17.2 438.16,-12.8 427.88,-10.23 428.51,-17.2"></polygon>
</g>
<!-- S1 -->
<g id="node2" class="node">
<title>S1</title>
<ellipse fill="none" stroke="black" cx="245.48" cy="-203" rx="39.5" ry="39.5"></ellipse>
<text text-anchor="middle" x="245.48" y="-206" font-family="Times,serif" font-size="10.00">S1</text>
<text text-anchor="middle" x="245.48" y="-194" font-family="Times,serif" font-size="10.00">(Disease)</text>
</g>
<!-- tProg -->
<g id="node8" class="node">
<title>tProg</title>
<polygon fill="none" stroke="black" points="383.73,-183 324.72,-183 324.72,-161 383.73,-161 383.73,-183"></polygon>
<text text-anchor="middle" x="354.23" y="-169.3" font-family="Times,serif" font-size="9.00">Progression</text>
</g>
<!-- S1&#45;&gt;tProg -->
<g id="edge7" class="edge">
<title>S1-&gt;tProg</title>
<path fill="none" stroke="black" d="M283.51,-192.24C293.63,-189.31 304.61,-186.12 314.8,-183.16"></path>
<polygon fill="black" stroke="black" points="316.04,-186.44 324.67,-180.29 314.09,-179.72 316.04,-186.44"></polygon>
</g>
<!-- tRec -->
<g id="node9" class="node">
<title>tRec</title>
<polygon fill="none" stroke="black" points="379.71,-55 328.74,-55 328.74,-33 379.71,-33 379.71,-55"></polygon>
<text text-anchor="middle" x="354.23" y="-41.3" font-family="Times,serif" font-size="9.00">Recovery</text>
</g>
<!-- S1&#45;&gt;tRec -->
<g id="edge9" class="edge">
<title>S1-&gt;tRec</title>
<path fill="none" stroke="black" d="M273.6,-175.2C279.07,-168.85 284.51,-161.92 288.98,-155 310.14,-122.25 303.58,-107.59 324.98,-75 327.78,-70.74 331.16,-66.48 334.6,-62.56"></path>
<polygon fill="black" stroke="black" points="337.32,-64.76 341.56,-55.05 332.19,-60 337.32,-64.76"></polygon>
</g>
<!-- tD1 -->
<g id="node10" class="node">
<title>tD1</title>
<polygon fill="none" stroke="black" points="477.97,-237 439.98,-237 439.98,-215 477.97,-215 477.97,-237"></polygon>
<text text-anchor="middle" x="458.98" y="-223.3" font-family="Times,serif" font-size="9.00">Death</text>
</g>
<!-- S1&#45;&gt;tD1 -->
<g id="edge11" class="edge">
<title>S1-&gt;tD1</title>
<path fill="none" stroke="black" d="M284.78,-207.17C326.6,-211.71 392.57,-218.89 429.86,-222.94"></path>
<polygon fill="black" stroke="black" points="429.7,-226.45 440.02,-224.05 430.46,-219.49 429.7,-226.45"></polygon>
</g>
<!-- tC1 -->
<g id="node14" class="node">
<title>tC1</title>
<polygon fill="none" stroke="black" points="576.22,-100 534.22,-100 534.22,-78 576.22,-78 576.22,-100"></polygon>
<text text-anchor="middle" x="555.22" y="-86.3" font-family="Times,serif" font-size="9.00">Censor</text>
</g>
<!-- S1&#45;&gt;tC1 -->
<g id="edge13" class="edge">
<title>S1-&gt;tC1</title>
<path fill="none" stroke="black" d="M278.28,-180.8C292.3,-171.41 309.16,-160.67 324.98,-152 365.44,-129.81 375.22,-122.07 419.48,-109 454.52,-98.65 496.34,-93.51 524,-91.06"></path>
<polygon fill="black" stroke="black" points="524.53,-94.53 534.21,-90.22 523.96,-87.55 524.53,-94.53"></polygon>
</g>
<!-- S2 -->
<g id="node3" class="node">
<title>S2</title>
<ellipse fill="none" stroke="black" cx="458.98" cy="-157" rx="39.5" ry="39.5"></ellipse>
<text text-anchor="middle" x="458.98" y="-160" font-family="Times,serif" font-size="10.00">S2</text>
<text text-anchor="middle" x="458.98" y="-148" font-family="Times,serif" font-size="10.00">(Progressed)</text>
</g>
<!-- tD2 -->
<g id="node11" class="node">
<title>tD2</title>
<polygon fill="none" stroke="black" points="574.22,-187 536.23,-187 536.23,-165 574.22,-165 574.22,-187"></polygon>
<text text-anchor="middle" x="555.22" y="-173.3" font-family="Times,serif" font-size="9.00">Death</text>
</g>
<!-- S2&#45;&gt;tD2 -->
<g id="edge15" class="edge">
<title>S2-&gt;tD2</title>
<path fill="none" stroke="black" d="M497.77,-164.62C507.34,-166.55 517.44,-168.59 526.42,-170.39"></path>
<polygon fill="black" stroke="black" points="525.84,-173.85 536.33,-172.39 527.22,-166.99 525.84,-173.85"></polygon>
</g>
<!-- tC2 -->
<g id="node15" class="node">
<title>tC2</title>
<polygon fill="none" stroke="black" points="576.22,-143 534.22,-143 534.22,-121 576.22,-121 576.22,-143"></polygon>
<text text-anchor="middle" x="555.22" y="-129.3" font-family="Times,serif" font-size="9.00">Censor</text>
</g>
<!-- S2&#45;&gt;tC2 -->
<g id="edge17" class="edge">
<title>S2-&gt;tC2</title>
<path fill="none" stroke="black" d="M497.23,-147.12C506.32,-144.71 515.93,-142.16 524.62,-139.85"></path>
<polygon fill="black" stroke="black" points="525.54,-143.23 534.3,-137.28 523.74,-136.46 525.54,-143.23"></polygon>
</g>
<!-- Dsec -->
<g id="node4" class="node">
<title>Dsec</title>
<ellipse fill="none" stroke="black" cx="245.48" cy="-102" rx="39.5" ry="39.5"></ellipse>
<ellipse fill="none" stroke="black" cx="245.48" cy="-102" rx="43.5" ry="43.5"></ellipse>
<text text-anchor="middle" x="245.48" y="-105" font-family="Times,serif" font-size="10.00">D_sec</text>
<text text-anchor="middle" x="245.48" y="-93" font-family="Times,serif" font-size="10.00">(Secular)</text>
</g>
<!-- Ddis -->
<g id="node5" class="node">
<title>Ddis</title>
<ellipse fill="none" stroke="black" cx="659.2" cy="-207" rx="39.5" ry="39.5"></ellipse>
<ellipse fill="none" stroke="black" cx="659.2" cy="-207" rx="43.5" ry="43.5"></ellipse>
<text text-anchor="middle" x="659.2" y="-210" font-family="Times,serif" font-size="10.00">D_dis</text>
<text text-anchor="middle" x="659.2" y="-198" font-family="Times,serif" font-size="10.00">(Disease)</text>
</g>
<!-- Tend -->
<g id="node6" class="node">
<title>Tend</title>
<ellipse fill="none" stroke="black" cx="659.2" cy="-89" rx="43.43" ry="43.43"></ellipse>
<ellipse fill="none" stroke="black" cx="659.2" cy="-89" rx="47.45" ry="47.45"></ellipse>
<text text-anchor="middle" x="659.2" y="-92" font-family="Times,serif" font-size="10.00">T_end</text>
<text text-anchor="middle" x="659.2" y="-80" font-family="Times,serif" font-size="10.00">(Admin censor)</text>
</g>
<!-- tInc&#45;&gt;S1 -->
<g id="edge2" class="edge">
<title>tInc-&gt;S1</title>
<path fill="none" stroke="black" d="M166.16,-173.34C175.91,-177.04 187.45,-181.41 198.63,-185.64"></path>
<polygon fill="black" stroke="black" points="197.72,-189.04 208.31,-189.31 200.2,-182.49 197.72,-189.04"></polygon>
</g>
<!-- tProg&#45;&gt;S2 -->
<g id="edge8" class="edge">
<title>tProg-&gt;S2</title>
<path fill="none" stroke="black" d="M383.57,-167.86C391.69,-166.68 400.77,-165.35 409.72,-164.04"></path>
<polygon fill="black" stroke="black" points="410.33,-167.49 419.72,-162.59 409.32,-160.57 410.33,-167.49"></polygon>
</g>
<!-- tRec&#45;&gt;H -->
<g id="edge10" class="edge">
<title>tRec-&gt;H</title>
<path fill="none" stroke="black" d="M328.6,-44.39C277.14,-45.22 157.37,-47.13 89.58,-48.22"></path>
<polygon fill="black" stroke="black" points="89.1,-44.72 79.16,-48.38 89.21,-51.72 89.1,-44.72"></polygon>
</g>
<!-- tD1&#45;&gt;Ddis -->
<g id="edge12" class="edge">
<title>tD1-&gt;Ddis</title>
<path fill="none" stroke="black" d="M477.92,-224.28C506.44,-221.55 563.23,-216.1 605.48,-212.05"></path>
<polygon fill="black" stroke="black" points="606,-215.52 615.62,-211.08 605.33,-208.55 606,-215.52"></polygon>
</g>
<!-- tD2&#45;&gt;Ddis -->
<g id="edge16" class="edge">
<title>tD2-&gt;Ddis</title>
<path fill="none" stroke="black" d="M573.99,-181.4C583.44,-184.27 595.6,-187.97 607.71,-191.65"></path>
<polygon fill="black" stroke="black" points="606.79,-195.03 617.37,-194.59 608.82,-188.33 606.79,-195.03"></polygon>
</g>
<!-- tD0&#45;&gt;Dsec -->
<g id="edge4" class="edge">
<title>tD0-&gt;Dsec</title>
<path fill="none" stroke="black" d="M159.43,-87.96C168.7,-89.49 180.55,-91.45 192.44,-93.41"></path>
<polygon fill="black" stroke="black" points="191.94,-96.87 202.37,-95.05 193.08,-89.97 191.94,-96.87"></polygon>
</g>
<!-- tC0&#45;&gt;Tend -->
<g id="edge6" class="edge">
<title>tC0-&gt;Tend</title>
<path fill="none" stroke="black" d="M480.07,-18.91C509.2,-30.37 564.17,-52 605.37,-68.21"></path>
<polygon fill="black" stroke="black" points="604.14,-71.49 614.73,-71.9 606.71,-64.98 604.14,-71.49"></polygon>
</g>
<!-- tC1&#45;&gt;Tend -->
<g id="edge14" class="edge">
<title>tC1-&gt;Tend</title>
<path fill="none" stroke="black" d="M576.37,-89C583.79,-89 592.61,-89 601.67,-89"></path>
<polygon fill="black" stroke="black" points="601.93,-92.5 611.93,-89 601.93,-85.5 601.93,-92.5"></polygon>
</g>
<!-- tC2&#45;&gt;Tend -->
<g id="edge18" class="edge">
<title>tC2-&gt;Tend</title>
<path fill="none" stroke="black" d="M576.37,-123.5C584.99,-119.87 595.49,-115.44 606.06,-110.98"></path>
<polygon fill="black" stroke="black" points="607.47,-114.19 615.32,-107.08 604.75,-107.74 607.47,-114.19"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 534.18 143.17" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 139.17)">
<title>QueueNet</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-139.17 530.18,-139.17 530.18,4 -4,4"></polygon>
<!-- Q -->
<g id="node1" class="node">
<title>Q</title>
<ellipse fill="none" stroke="black" cx="106.31" cy="-67.66" rx="27.15" ry="27.15"></ellipse>
<text text-anchor="middle" x="106.31" y="-64.66" font-family="Times,serif" font-size="10.00">Q_wait</text>
</g>
<!-- Seize -->
<g id="node5" class="node">
<title>Seize</title>
<polygon fill="none" stroke="black" points="206.64,-78.66 170.64,-78.66 170.64,-56.66 206.64,-56.66 206.64,-78.66"></polygon>
<text text-anchor="middle" x="188.64" y="-64.96" font-family="Times,serif" font-size="9.00">Seize</text>
</g>
<!-- Q&#45;&gt;Seize -->
<g id="edge2" class="edge">
<title>Q-&gt;Seize</title>
<path fill="none" stroke="black" d="M134.06,-67.66C142.53,-67.66 151.9,-67.66 160.41,-67.66"></path>
<polygon fill="black" stroke="black" points="160.58,-71.16 170.58,-67.66 160.58,-64.16 160.58,-71.16"></polygon>
</g>
<!-- R -->
<g id="node2" class="node">
<title>R</title>
<ellipse fill="none" stroke="black" cx="489.67" cy="-98.66" rx="36.52" ry="36.52"></ellipse>
<text text-anchor="middle" x="489.67" y="-101.66" font-family="Times,serif" font-size="10.00">R_cap</text>
<text text-anchor="middle" x="489.67" y="-89.66" font-family="Times,serif" font-size="10.00">(init = 1)</text>
</g>
<!-- R&#45;&gt;Seize -->
<g id="edge3" class="edge">
<title>R-&gt;Seize</title>
<path fill="none" stroke="black" d="M452.84,-96.69C405,-93.81 317.68,-87.67 243.64,-77.66 234.9,-76.48 225.44,-74.85 216.91,-73.25"></path>
<polygon fill="black" stroke="black" points="217.56,-69.81 207.08,-71.34 216.23,-76.68 217.56,-69.81"></polygon>
</g>
<!-- Svc -->
<g id="node3" class="node">
<title>Svc</title>
<ellipse fill="none" stroke="black" cx="276.3" cy="-32.66" rx="32.82" ry="32.82"></ellipse>
<text text-anchor="middle" x="276.3" y="-29.66" font-family="Times,serif" font-size="10.00">InService</text>
</g>
<!-- Release -->
<g id="node6" class="node">
<title>Release</title>
<polygon fill="none" stroke="black" points="389.94,-43.66 345.97,-43.66 345.97,-21.66 389.94,-21.66 389.94,-43.66"></polygon>
<text text-anchor="middle" x="367.95" y="-29.96" font-family="Times,serif" font-size="9.00">Release</text>
</g>
<!-- Svc&#45;&gt;Release -->
<g id="edge5" class="edge">
<title>Svc-&gt;Release</title>
<path fill="none" stroke="black" d="M309.16,-32.66C317.82,-32.66 327.18,-32.66 335.8,-32.66"></path>
<polygon fill="black" stroke="black" points="335.85,-36.16 345.85,-32.66 335.85,-29.16 335.85,-36.16"></polygon>
</g>
<!-- Arrive -->
<g id="node4" class="node">
<title>Arrive</title>
<polygon fill="none" stroke="black" points="41.98,-78.66 0.01,-78.66 0.01,-56.66 41.98,-56.66 41.98,-78.66"></polygon>
<text text-anchor="middle" x="20.99" y="-64.96" font-family="Times,serif" font-size="9.00">Arrival</text>
</g>
<!-- Arrive&#45;&gt;Q -->
<g id="edge1" class="edge">
<title>Arrive-&gt;Q</title>
<path fill="none" stroke="black" d="M42.16,-67.66C50.14,-67.66 59.57,-67.66 68.67,-67.66"></path>
<polygon fill="black" stroke="black" points="68.71,-71.16 78.71,-67.66 68.71,-64.16 68.71,-71.16"></polygon>
</g>
<!-- Seize&#45;&gt;Svc -->
<g id="edge4" class="edge">
<title>Seize-&gt;Svc</title>
<path fill="none" stroke="black" d="M206.97,-60.58C215.51,-57.09 226.16,-52.74 236.5,-48.51"></path>
<polygon fill="black" stroke="black" points="237.91,-51.72 245.84,-44.7 235.26,-45.24 237.91,-51.72"></polygon>
</g>
<!-- Release&#45;&gt;R -->
<g id="edge6" class="edge">
<title>Release-&gt;R</title>
<path fill="none" stroke="black" d="M387.5,-43.82C393.94,-47.64 401.23,-51.89 407.95,-55.66 420.87,-62.91 435.11,-70.59 447.97,-77.43"></path>
<polygon fill="black" stroke="black" points="446.59,-80.65 457.06,-82.23 449.86,-74.46 446.59,-80.65"></polygon>
</g>
<!-- P_done -->
<g id="node7" class="node">
<title>P_done</title>
<polygon fill="none" stroke="black" points="511.17,-31.66 468.17,-31.66 468.17,-9.66 511.17,-9.66 511.17,-31.66"></polygon>
<text text-anchor="middle" x="489.67" y="-17.96" font-family="Times,serif" font-size="9.00">P_done</text>
</g>
<!-- Release&#45;&gt;P_done -->
<g id="edge7" class="edge">
<title>Release-&gt;P_done</title>
<path fill="none" stroke="black" d="M390.11,-24.5C395.81,-22.67 402.04,-20.99 407.95,-20.06 424.21,-17.5 442.55,-17.42 457.63,-18.07"></path>
<polygon fill="black" stroke="black" points="457.78,-21.59 467.96,-18.66 458.18,-14.6 457.78,-21.59"></polygon>
<text text-anchor="middle" x="421.55" y="-41.66" font-family="Times,serif" font-size="14.00">Next</text>
<text text-anchor="middle" x="421.55" y="-24.86" font-family="Times,serif" font-size="14.00">state</text>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
</section>
<section id="extra-stuff" class="level1">
<h1>Extra Stuff</h1>
<p><span class="hl hl-blue">blue highlighted text</span> <span class="hl hl-red">red highlighted text</span> <span class="hl hl-cyan">cyan highlighted text</span> <span class="hl hl-green">green highlighted text</span> <span class="hl hl-brown">brown highlighted text</span></p>
<p>Here’s some <span style="color:cornflowerblue"><strong>some bolded blue text</strong></span> How about some <span style="color:firebrick"><strong>red bolded text</strong></span> How about some <span style="color:darkcyan"><strong>cyan bolded text</strong></span></p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-graves2021comparison" class="csl-entry" role="listitem">
Graves, John, Shawn Garbett, Zilu Zhou, Jonathan S Schildcrout, and Josh Peterson. 2021. <span>“Comparison of Decision Modeling Approaches for Health Technology and Policy Evaluation.”</span> <em>Medical Decision Making</em> 41 (4): 453–64.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>